 ultrathink and methodically plan how to do this, including systematic testing, but dont implement yet